<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kopala FPL | Home</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <link rel="manifest" href="manifest.json">
    
    <meta name="theme-color" id="meta-theme-color" content="#37003c">
    
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body class="fpl-theme">

    <div id="side-drawer" class="drawer">
        <div class="drawer-header">
            <h2 class="brand">KOPALA <span>FPL</span></h2>
            <button id="close-btn" aria-label="Close menu">&times;</button>
        </div>
        <ul class="drawer-links">
            <li><a href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
            <li><a href="kopala.html"><i class="fa-solid fa-trophy"></i> Mini Leagues</a></li>
            <li><a href="team.html"><i class="fa-solid fa-robot"></i> AI Team Builder</a></li>
            <li><a href="price.html"><i class="fa-solid fa-chart-line"></i> Price Changes</a></li>
            <li><a href="football.html"><i class="fa-solid fa-futbol"></i> Football Leagues</a></li>
            <li><a href="contact.html"><i class="fa-solid fa-envelope"></i> Contact Us</a></li>
        </ul>
    </div>

    <div id="main-backdrop" class="backdrop"></div>

    <nav class="navbar">
        <div class="progress-container">
            <div class="progress-bar" id="myBar"></div>
        </div>
        
        <div class="nav-left">
            <button id="menu-btn" class="menu-icon" aria-label="Open menu">
                <span></span><span></span><span></span>
            </button>
            <ul class="nav-links desktop-only">
                <li><a href="index.html">Home</a></li>
                <li><a href="kopala.html">Leagues</a></li>
            </ul>
        </div>

        <a href="index.html" class="brand">KOPALA <span>FPL</span></a>
        
        <div class="nav-right">
            <ul class="nav-links desktop-only">
                <li><a href="team.html">AI Builder</a></li>
            </ul>
            
            <div class="theme-menu-container">
                <button id="theme-master-btn" class="icon-btn" onclick="toggleThemeMenu()">
                    <i class="fa-solid fa-palette"></i>
                </button>
                <div id="theme-dropdown" class="theme-dropdown">
                    <div class="swatch-grid">
                        <button class="swatch" style="background: #ff005a;" onclick="applyMaterialTheme('#ff005a', true)"></button>
                        <button class="swatch" style="background: #00ff87;" onclick="applyMaterialTheme('#00ff87', true)"></button>
                        <button class="swatch" style="background: #04f5ff;" onclick="applyMaterialTheme('#04f5ff', true)"></button>
                        <button class="swatch" style="background: #7d32f4;" onclick="applyMaterialTheme('#7d32f4', true)"></button>
                    </div>
                    <hr class="dropdown-divider">
                    <button class="dark-toggle-row" onclick="toggleDarkMode()">
                        <i class="fa-solid fa-moon"></i> Dark Mode
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">
        
        <aside class="sidebar-area">
            
            <div id="install-card" class="card highlight-card pwa-install" style="display: none;">
                <h3 class="card-label">App Experience</h3>
                <p class="input-hint">Install Kopala FPL for a faster, full-screen experience.</p>
                <button id="install-btn" class="btn-primary-alt">
                    <i class="fa-solid fa-cloud-arrow-down"></i> Install App
                </button>
            </div>

            <div id="deadline-card" class="card">
                <h3 class="card-label">Next Deadline</h3>
                <div id="countdown-timer" class="timer-grid">
                    <div class="t-unit"><span id="days">00</span><label>Days</label></div>
                    <div class="t-unit"><span id="hours">00</span><label>Hrs</label></div>
                    <div class="t-unit"><span id="mins">00</span><label>Min</label></div>
                    <div class="t-unit"><span id="secs">00</span><label>Sec</label></div>
                </div>
            </div>

            <div id="id-entry-section" class="card">
                <h3 class="card-label">Rank Tracker</h3>
                <div class="input-stack">
                    <input type="number" id="fpl-id" placeholder="Enter FPL Team ID">
                    <button id="change-id-btn" class="btn-primary">Track My Team</button>
                </div>
            </div>
        </aside>

        <section class="main-content-area">
            
            <div id="live-dashboard" class="hidden card dashboard-card">
                <div class="dash-header">
                    <div>
                        <label class="card-label">Manager Status</label>
                        <p id="disp-name" class="manager-name">--</p>
                    </div>
                    <button class="reset-fpl-id reset-btn" title="Sign Out">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </button>
                </div>
                <div class="dashboard-grid">
                    <div class="stat-box"><span id="disp-gw">0</span><label>GW Pts</label></div>
                    <div class="stat-box"><span id="disp-total">0</span><label>Total</label></div>
                    <div class="stat-box"><span id="disp-rank">--</span><label>OVR Rank</label></div>
                </div>
            </div>

            <div id="upcoming-fixtures-card" class="card">
                <div class="card-header">
                    <h2 class="section-title"><i class="fa-solid fa-calendar-check"></i> Fixtures</h2>
                    <div class="gw-selector">
                        <button onclick="changeGW(-1)" class="nav-btn-sm"><i class="fa-solid fa-chevron-left"></i></button>
                        <span id="next-gw-badge" class="badge-gw">GW --</span>
                        <button onclick="changeGW(1)" class="nav-btn-sm"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
                <div id="upcoming-list-container" class="data-scroll-container">
                    </div>
            </div>

            <div id="match-center-card" class="card">
                <div class="card-header">
                    <h2 class="section-title"><i class="fa-solid fa-bolt-lightning"></i> Bonus Center</h2>
                    <span id="live-indicator" class="hidden live-badge">
                        <span class="pulse-dot"></span> LIVE
                    </span>
                </div>
                <div id="fixtures-container" class="data-scroll-container">
                    <div class="empty-state">
                        <p>No matches currently live.</p>
                    </div>
                </div>
            </div>

        </section>
    </main>

    <footer class="main-footer">
        <p><strong>KOPALA FPL</strong> &copy; 2026</p>
        <p class="footer-legal">Powered by Premier League API Data</p>
    </footer>

    <button class="back-to-top" id="backToTop" aria-label="Scroll to top">
        <i class="fa-solid fa-arrow-up"></i>
    </button>

    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
        <p>Updating Stats...</p>
    </div>

    <div id="confirm-modal">
        </div>

    <script src="script.js"></script>
    <script src="deadline.js"></script>
    <script src="match-center.js"></script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker failed', err));
            });
        }
    </script>

</body>
</html>
